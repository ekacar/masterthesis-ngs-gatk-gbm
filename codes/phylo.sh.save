#!/bin/bash
vcf="/data/Unit_LMM/selberherr-group/kacar/ngs-gatk-trial/results"
titan="/home/kacar/miniconda3/envs/titancna/lib/R/library/TitanCNA/doc"
samples=("COMP5_1_S126518" "COMP5_2_S126517" "COMP5_5_S126520" "COMP9_5_S126523" "COMP9_6_S126526" "COMP9_7_S126525" "GA11_1_S126532" "GA11_2_S126531" "GA11_3_S126534")
results="/data/Unit_LMM/selberherr-group/kacar/ngs-gatk-trial/results"
titanresults="/data/Unit_LMM/selberherr-group/kacar/ngs-gatk-trial/results/cna_calling/titancna"

#Translate CNA results from GATK4 to TITAN 
#conda activate  titancna

for sample in "${samples[@]}"; do
 Rscript ${titan}/titanCNA.R --id ${sample} --hetFile BSF_1274_H3CTKDSX5#${sample}_segments_new.hets.tsv --cnFile BSF_1274_H3CTKDSX5#${sample}_segments_new.cr.seg --numClusters 1 --numCores 5
    
      --ploidy_0 2\
      --chrs "c(1:22, \"X\")"\
      --estimatePloidy TRUE\
      --outDir ${titanresults}
done



#for sample in "${samples[@]}"; do
#    create_phylowgs_inputs.py -s 5000 --vcf-type sample=mutect_smchet sample=${vcf}/ssv_calling/BSF_1274_H3CTKDSX5#${sample}_final_vcf.gz --regions=all  --output-variants ${vcf}/phylo/ssm_data_${sample}.txt
#done

#evolve.py ssm_data.txt cnv_data.txt

#write_results.py example_data trees.zip example_data.summ.json.gz example_data.muts.json.gz example_data.mutass.zip
